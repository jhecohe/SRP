<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./plantillaAdmin.xhtml">

            <ui:define name="content">
                <f:view>
                    <h1><h:outputText value="Agregar Funcionario" /></h1>
                    <h:form>  
                        <p:menubar style="height: 26px; padding-right: 1%">
                            <p:menuitem id="agregar" value="Agregar Funcionario" immediate="true" icon="ui-icon-gear"/>  
                            <p:menuitem value="Actualizar" update="funcionarioList" icon="ui-icon-arrowrefresh-1-w" ajax="false"/> 
                        </p:menubar> 

                        <p:overlayPanel id="datos" for="agregar" hideEffect="fade" style="background-color: #AFAFAF"> 
                            <h:panelGrid columns="6" id="body">
                                <h:outputLabel value="Nombre:                       *" />
                                <p:inputText id="nombre" value="#{funcionarioBean.nombre}" required="true" label="Nombre">
                                    <f:validateLength minimum="2"/>
                                </p:inputText>
                                <p:message for="nombre" display="icon"/>
                                <h:outputLabel value="Segundo Nombre" />
                                <p:inputText id="snombre" value="#{funcionarioBean.segnombre}"/>
                                <p:message for="snombre" display="icon"/>
                                <h:outputLabel value="Apellido: *" />
                                <p:inputText id="apellido" value="#{funcionarioBean.apellido}" required="true" label="Apellido">
                                    <f:validateLength minimum="2"/>
                                </p:inputText>
                                <p:message for="apellido" display="icon"/>  
                                <h:outputLabel value="Segundo Apellido" />
                                <p:inputText id="sapellido" value="#{funcionarioBean.segapellido}"/>
                                <p:message for="sapellido" display="icon"/> 
                                <h:outputLabel value="Cedula: *" />
                                <p:inputText id="cedula" value="#{funcionarioBean.identificacion}" required="true" label="cedula">
                                    <f:validateLength minimum="7"/>
                                </p:inputText>
                                <p:message for="cedula" display="icon"/> 
                                <h:outputLabel value="Ciudad Expedicion" />
                                <p:selectOneMenu value="#{funcionarioBean.ciudadByIdciudad}" style="width: 180px" id="ciudadExp" 
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItems value="#{funcionarioBean.listadoCiudad()}" var="ciu"
                                                   itemLabel="#{ciu.descciudad}" itemValue="#{ciu.idciudad}" />
                                </p:selectOneMenu>
                                <p:message for="ciudadExp" display="icon"/> 
                                <h:outputLabel value="Fecha de Nacimiento: *" />
                                <p:calendar value="#{funcionarioBean.fechanacimiento}" id="fecha" pattern="yyyy/M/d" navigator="true" required="true"
                                            showButtonPanel="true" yearRange="1970:2020" label="fecha"> 
                                    <f:convertDateTime pattern="yyyy/M/d"/>
                                </p:calendar> 
                                <p:message for="fecha" display="icon"/> 
                                <h:outputLabel value="Lugar de Nacimiento" />
                                <p:selectOneMenu value="#{funcionarioBean.ciudadByCiuIdciudad}" style="width: 180px" id="ciudad" label="lugar de nacimiento"
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItems value="#{funcionarioBean.listadoCiudad()}" var="ciu"
                                                   itemLabel="#{ciu.descciudad}" itemValue="#{ciu.idciudad}" />
                                </p:selectOneMenu>
                                <p:message for="ciudad" display="icon"/>                             
                                <h:outputLabel value="Telefono: *" />
                                <p:inputText id="tele" value="#{funcionarioBean.telefono}" required="true" label="telefono">
                                    <f:validateLength minimum="7"/>
                                </p:inputText>
                                <p:message for="tele" display="icon"/> 
                                <h:outputLabel value="Correo: *" />
                                <p:inputText id="correo" value="#{funcionarioBean.correo}" required="true" label="correo">
                                    <f:validateLength minimum="7"/>
                                </p:inputText>
                                <p:message for="correo" display="icon"/> 
                                <h:outputLabel value="Ciudad Residencia" />
                                <p:selectOneMenu value="#{funcionarioBean.ciudadByCiuIdciudad2}" style="width: 180px" id="ciudadReci"
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItems value="#{funcionarioBean.listadoCiudad()}" var="ciu"
                                                   itemLabel="#{ciu.descciudad}" itemValue="#{ciu.idciudad}" />
                                </p:selectOneMenu>
                                <p:message for="ciudadReci" display="icon"/> 
                                <h:outputLabel value="Direccion: *" />
                                <p:inputText id="direc" value="#{funcionarioBean.direccion}" label="direccion">
                                    <f:validateLength minimum="7"/>
                                </p:inputText>
                                <p:message for="direc" display="icon"/>  
                                
                                <h:outputLabel value="Cargo:  *" />
                                <p:selectOneMenu value="#{funcionarioBean.cargo}" id="cargo" style="width: 180px" label="cargo" 
                                                 filter="true" filterMatchMode="startsWith">    
                                    <f:selectItem itemLabel="Seleccione Cargo" itemValue="null"/>
                                    <f:selectItems value="#{funcionarioBean.listadoCargo()}" var="car"
                                                   itemLabel="#{car.desccargo}" itemValue="#{car.idcargo}" />
                                </p:selectOneMenu>
                                <p:message for="cargo" display="icon"/> 
                                
                                <h:outputLabel value="Grado:  *" />
                                <p:selectOneMenu value="#{funcionarioBean.grado}" id="grado" style="width: 180px" label="grado" 
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="Seleccione Grado" itemValue="null"/>
                                    <f:selectItems value="#{funcionarioBean.listadoGrado()}" var="gra"
                                                   itemLabel="#{gra.descgrado}" itemValue="#{gra.idgrado}" />
                                </p:selectOneMenu>
                                <p:message for="grado" display="icon"/> 
                                <h:outputLabel value="Clase:  *" />
                                <p:selectOneMenu value="#{funcionarioBean.clase}" id="clase" style="width: 180px" label="clase"
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="Seleccione Clase" itemValue="null"/>
                                    <f:selectItems value="#{funcionarioBean.listadoClase()}" var="cla"
                                                   itemLabel="#{cla.descclase}" itemValue="#{cla.idclase}" />
                                </p:selectOneMenu>
                                <p:message for="clase" display="icon"/> 


                                <h:outputLabel value="Region: *" />
                                <p:selectOneMenu id="region" value="#{funcionarioBean.region}" style="width: 180px"
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="Seleccione Region" itemValue=""/>
                                    <f:selectItems value="#{funcionarioBean.listadoRegional()}" var="r"
                                                   itemLabel="#{r.descregional}" itemValue="#{r.idregional}"/>
                                    <p:ajax update="seccional" />
                                </p:selectOneMenu>
                                <p:message for="region" display="icon"/> 

                                <h:outputLabel value="Seccional: *" />
                                <p:selectOneMenu id="seccional" value="#{funcionarioBean.seccional}" style="width: 180px"
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="Seleccione Seccional" itemValue=""/>
                                    <f:selectItems value="#{funcionarioBean.listadoSeccional()}" var="s"
                                                   itemLabel="#{s.descseccional}" itemValue="#{s.idseccional}"/>
                                    <p:ajax update="area" />
                                </p:selectOneMenu>
                                <p:message for="seccional" display="icon"/> 

                                <h:outputLabel value="Area: *" />
                                <p:selectOneMenu id="area" value="#{funcionarioBean.area}" style="width: 180px" 
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="Seleccione Area" itemValue=""/>
                                    <f:selectItems value="#{funcionarioBean.listadoArea()}" var="a"
                                                   itemLabel="#{a.descarea}" itemValue="#{a.idarea}"/>
                                    <p:ajax update="subarea"/>
                                </p:selectOneMenu>
                                <p:message for="area" display="icon"/> 

                                <h:outputLabel value="Subarea: *" />
                                <p:selectOneMenu id="subarea" value="#{funcionarioBean.subarea}" style="width: 180px"
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="Seleccione Subarea" itemValue=""/>
                                    <f:selectItems value="#{funcionarioBean.listadoSubarea()}" var="sub"
                                                   itemLabel="#{sub.descsubarea}" itemValue="#{sub.idsubarea}"/>
                                </p:selectOneMenu>
                                <p:message for="subarea" display="icon"/> 
                            </h:panelGrid>
                            <br/>
                            <br/>
                            <h:outputLabel value="!Los campos con * son obligatorios!" style="font-style: italic; color: #045491" />
                            <br/>
                            <br/>
                            <p:commandButton action="#{funcionarioBean.agregar()}" value="Agregar" ajax="false" />

                        </p:overlayPanel>
                        
                        <p:messages id="mensajes" closable="true" showSummary="true" />
                        
                        <p:dataTable id="funcionarioList" var="func" value="#{funcionarioBean.listado()}"  
                                     paginator="true" rows="10"  editable="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                     rowsPerPageTemplate="5,10,15"
                                     scrollable="true" scrollWidth="990" resizableColumns="true"  >  
                            <f:facet name="header">  
                                Listado de Fucionarios
                            </f:facet>  

                            <p:ajax event="rowEdit" listener="#{funcionarioBean.modificar}" />

                            <p:column headerText="Documento" width="125">  
                                <h:outputText value="#{func.identificacion}" />  
                            </p:column>  

                            <p:column headerText="Nombre" width="125">  
                                <p:cellEditor>  
                                    <f:facet name="output">  
                                        <h:outputText value="#{func.nombre}" />  
                                    </f:facet>  
                                    <f:facet name="input">  
                                        <p:inputText value="#{func.nombre}"/>  
                                    </f:facet>  
                                </p:cellEditor>  
                            </p:column>

                            <p:column headerText="Seg Nombre" width="125">  
                                <p:cellEditor>  
                                    <f:facet name="output">  
                                        <h:outputText value="#{func.segnombre}" />  
                                    </f:facet>  
                                    <f:facet name="input">  
                                        <p:inputText value="#{func.segnombre}" />  
                                    </f:facet>  
                                </p:cellEditor>  
                            </p:column>
                            <p:column headerText="Apellido" width="125">  
                                <p:cellEditor>  
                                    <f:facet name="output">  
                                        <h:outputText value="#{func.apellido}" />  
                                    </f:facet>  
                                    <f:facet name="input">  
                                        <p:inputText value="#{func.apellido}" />  
                                    </f:facet>  
                                </p:cellEditor>  
                            </p:column>
                            <p:column headerText="Seg Apellido" width="125">  
                                <p:cellEditor>  
                                    <f:facet name="output">  
                                        <h:outputText value="#{func.segapellido}" />  
                                    </f:facet>  
                                    <f:facet name="input">  
                                        <p:inputText value="#{func.segapellido}" />  
                                    </f:facet>  
                                </p:cellEditor>  
                            </p:column>
                            <p:column headerText="Fecha Nacimiento" width="125">  
                                <p:cellEditor>  
                                    <f:facet name="output">  
                                        <h:outputText value="#{func.fechanacimiento}" />  
                                    </f:facet>  
                                    <f:facet name="input">  
                                        <p:calendar value="#{func.fechanacimiento}" id="calendario" pattern="yyyy/M/d">
                                            <f:convertDateTime pattern="yyyy/M/d"/>
                                        </p:calendar> 
                                    </f:facet>  
                                </p:cellEditor>  
                            </p:column>
                            <p:column headerText="Telefono" width="125">  
                                <p:cellEditor>  
                                    <f:facet name="output">  
                                        <h:outputText value="#{func.telefono}" />  
                                    </f:facet>  
                                    <f:facet name="input">  
                                        <p:inputText value="#{func.telefono}" />  
                                    </f:facet>  
                                </p:cellEditor>  
                            </p:column>
                            <p:column headerText="Correo" width="125">  
                                <p:cellEditor>  
                                    <f:facet name="output">  
                                        <h:outputText value="#{func.correo}" />  
                                    </f:facet>  
                                    <f:facet name="input">  
                                        <p:inputText value="#{func.correo}" />  
                                    </f:facet>  
                                </p:cellEditor>  
                            </p:column>

                            <p:column headerText="Editar" width="25">  
                                <p:rowEditor />  
                            </p:column>  

                        </p:dataTable> 

                    </h:form>
                </f:view>
            </ui:define>

            <ui:define name="bottom">
                
            </ui:define>

        </ui:composition>

    </body>
</html>
